# 現在できること

## 👥 管理者目線

### 管理者アカウント管理
- 管理者（社員・アルバイト）の新規登録
- 管理者一覧の表示・編集・削除
- 雇用形態の管理（正社員・アルバイト）
- ログイン・ログアウト機能
- パスワードリセット機能

### ユーザー（生徒・先生）管理
- 生徒・先生の新規登録（個別・CSV一括登録）
- ユーザー情報の編集（名前、学年、ステータス、クラス、属性）
- ユーザーの削除
- ユーザー一覧の表示・検索・フィルタリング
- ステータス管理（在籍、休会、退会、卒業）
- 属性管理（生徒、アルバイト、正社員）
- クラス管理（キンダー、ビギナー、チャレンジャー、クリエイター、イノベーター）

### NFCカード管理
- NFCカードの登録（自動読み取り・手動入力）
- カード登録状態の確認（登録済み/未登録、有効/無効）
- カードの削除・無効化

### 入退室管理
- 入退室ログの一覧表示
- 入退室ログの検索・フィルタリング（日付範囲、種別、生徒名）
- 入退室ログのCSV出力
- 入退室ログの訂正（種別・時刻の修正）
- 生徒の最終イベント情報の確認

### ポイント管理
- ポイント設定（入室ポイント、ボーナスポイント、1日1回制限）
- ポイント一覧の表示
- ポイントの手動付与（個別・一括）
- ポイント履歴の確認
- ポイントダッシュボードの表示

### 保護者管理
- 保護者アカウントの管理
- 保護者と生徒の紐付け管理
- LINE連携状態の確認

### 設定管理
- 通知テンプレートの設定（入室・退室）
- ポイント設定の変更
- 開放時間の設定（属性ごと・個別）
- ボーナスポイント閾値の設定（属性ごと・クラスごと・個別）

---

## 👤 利用者（生徒・先生）目線

### 入退室
- NFCカードをタッチして入室記録
- NFCカードをタッチして退室記録
- アンドロイド端末での入退室操作
- 入退室時の自動ポイント付与（生徒のみ）
- 入退室時のLINE通知送信（保護者へ）

### ポイント
- 入室時のポイント自動付与（1日1回制限あり）
- 月次ボーナスポイントの自動付与（入室回数に応じて）
- ポイント履歴の確認（管理者経由）

---

## 👨‍👩‍👧 保護者目線

### LINE通知
- 生徒の入室時にLINE通知を受信
- 生徒の退室時にLINE通知を受信
- 自動退室時のLINE通知を受信
- LINE連携の設定・解除（QRコード経由）

---

## 🔧 システム機能

### 自動化
- 開放時間終了後の自動退室処理
- 入室時のポイント自動付与
- 月次ボーナスポイントの自動付与

### データ管理
- マルチテナント対応（SITE_IDによる分離）
- トランザクション処理によるデータ整合性保証
- 入退室ログの自動記録

---

## 📱 対応デバイス・環境

### キオスク端末
- Webブラウザ（Chrome推奨）
- NFC対応端末（Android推奨）
- 入口側・出口側の画面分離

### 管理画面
- Webブラウザ（PC・タブレット・スマートフォン対応）
- レスポンシブデザイン対応

---

## 🔐 セキュリティ

- 管理者認証（Supabase Auth）
- API認証（KIOSK_API_SECRET）
- Row Level Security (RLS) によるデータ分離
- 環境変数による機密情報管理

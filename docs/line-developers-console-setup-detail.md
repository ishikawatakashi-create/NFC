# LINE Developers Console 詳細セットアップガイド

**目的**: LINE Developers Consoleでチャネルを作成し、アクセストークンを取得する手順

---

## 📋 ステップバイステップ手順

### ステップ1: プロバイダーの作成（初回のみ）

LINE Developers Consoleにアクセスしたら：

1. **ログイン状態を確認**
   - 右上にLINEアカウント名が表示されていることを確認
   - ログインしていない場合は、LINEアカウントでログイン

2. **プロバイダーの確認**
   - 左側のメニューまたはトップページに「プロバイダー」が表示されているか確認
   - 既にプロバイダーがある場合は、ステップ2へ

3. **新規プロバイダーを作成**（プロバイダーがない場合のみ）
   - 「新規プロバイダー作成」または「Create」ボタンをクリック
   - プロバイダー名を入力（例：「テスト用」「〇〇塾」など）
   - 「作成」または「Create」ボタンをクリック

---

### ステップ2: Messaging APIチャネルの作成

1. **プロバイダーを選択**
   - 左側のメニューからプロバイダーを選択
   - または、トップページからプロバイダーをクリック

2. **チャネルを追加**
   - プロバイダーページで「チャネルを追加」または「Add channel」ボタンをクリック
   - チャネルタイプの選択画面が表示されます

3. **Messaging APIを選択**
   - チャネルタイプ一覧から「**Messaging API**」を選択
   - 「作成」または「Create」ボタンをクリック

4. **チャネル情報を入力**
   
   以下の情報を入力します：
   
   | 項目 | 入力内容 | 説明 |
   |------|---------|------|
   | **チャネル名** | 例：「テスト用 入退室通知」 | 識別しやすい名前を入力 |
   | **チャネル説明** | 例：「生徒の入退室を保護者に通知するテストシステム」 | 用途を説明（任意） |
   | **大業種** | 例：「教育・学習支援」 | 該当する業種を選択 |
   | **小業種** | 例：「学習塾・予備校」 | 該当する小業種を選択 |
   | **メールアドレス** | 管理者のメールアドレス | 通知を受け取るメールアドレス |
   | **利用規約への同意** | ☑ チェック | 利用規約を読み、同意する |

5. **作成を完了**
   - すべての必須項目を入力したら、「作成」または「Create」ボタンをクリック
   - チャネルが作成されると、チャネル詳細ページに移動します

---

### ステップ3: チャネルアクセストークンの発行

チャネル詳細ページに移動したら：

1. **Messaging API設定タブを開く**
   - ページ上部のタブから「**Messaging API設定**」または「**Messaging API**」タブをクリック
   - 設定画面が表示されます

2. **チャネルアクセストークン（長期）を探す**
   - ページをスクロールして「**チャネルアクセストークン（長期）**」セクションを探す
   - または、左側のメニューから「**チャネルアクセストークン**」を選択

3. **トークンを発行**
   - 「**発行**」または「**Issue**」ボタンをクリック
   - 確認ダイアログが表示される場合があります
   - 「発行」を確認

4. **トークンをコピー**
   - 発行されると、長い文字列（例：`xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`）が表示されます
   - 「**コピー**」または「**Copy**」ボタンをクリック
   - **重要**: このトークンは後で使用するので、安全な場所に保存してください
   - **注意**: このトークンは一度しか表示されません。コピーし忘れた場合は、再発行が必要です

---

### ステップ4: その他の重要な設定（後で必要）

チャネル詳細ページで、以下の設定も確認・設定しておくと便利です：

#### 4-1. QRコードの確認

1. 「Messaging API設定」タブで「**QRコード**」セクションを探す
2. QRコードを表示またはダウンロード
   - このQRコードをスキャンすると、LINE公式アカウントと友だちになります
   - テスト時に使用します

#### 4-2. チャネル基本設定の確認

1. 「**チャネル基本設定**」タブを開く
2. 以下の情報を確認：
   - **チャネルID**: 後で使用する場合があります
   - **チャネルシークレット**: セキュリティ設定で使用する場合があります

---

## ⚠️ よくある質問とトラブルシューティング

### Q1: 「チャネルを追加」ボタンが見つからない

**解決方法**:
- プロバイダーを選択しているか確認
- ページをリロードしてみる
- ブラウザのキャッシュをクリアしてみる

### Q2: Messaging APIが選択肢にない

**解決方法**:
- LINE Developers Consoleの最新版を使用しているか確認
- 別のブラウザで試してみる
- プロバイダーの権限を確認

### Q3: トークンが表示されない

**解決方法**:
- 「Messaging API設定」タブを開いているか確認
- ページをリロードしてみる
- 「チャネルアクセストークン（長期）」セクションまでスクロールして確認

### Q4: トークンをコピーし忘れた

**解決方法**:
- 「再発行」ボタンをクリックして新しいトークンを発行
- 古いトークンは無効になるので、新しいトークンを必ずコピー

### Q5: どの業種を選べばいいか分からない

**解決方法**:
- テスト用の場合は、適当な業種を選択しても問題ありません
- 本番運用時は、実際の事業内容に合わせて選択してください
- 例：「教育・学習支援」→「学習塾・予備校」

---

## 📝 次のステップ

チャネルアクセストークンを取得したら：

1. **環境変数に設定**
   - `.env.local` ファイルに `LINE_CHANNEL_ACCESS_TOKEN=取得したトークン` を追加

2. **Webhook URLを設定**（後で必要）
   - ローカル開発: ngrokのURL + `/api/line/webhook`
   - 本番環境: デプロイしたURL + `/api/line/webhook`

3. **QRコードで友だち追加**
   - テスト用に自分のLINEアカウントで友だち追加

---

## 🔒 セキュリティ注意事項

- **チャネルアクセストークンは機密情報です**
  - GitHubなどにコミットしないでください
  - `.env.local` ファイルは `.gitignore` に含まれていることを確認
  - 他人に共有しないでください

- **トークンが漏洩した場合**
  - LINE Developers Consoleで「再発行」をクリックして無効化
  - 新しいトークンを発行して、環境変数を更新

---

## 📚 参考リンク

- [LINE Developers Console](https://developers.line.biz/console/)
- [LINE Messaging API ドキュメント](https://developers.line.biz/ja/docs/messaging-api/)
- [チャネルアクセストークンの発行方法](https://developers.line.biz/ja/docs/messaging-api/channel-access-token/)

---

**最終更新**: 2025年1月



